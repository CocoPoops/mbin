{% block user %}
    {%- if prefix -%}<small class="text-muted">/u/</small>{%- endif -%}
    <a class="{{ bolded ? 'font-weight-bold' : '' }}"
       data-controller="user-popup"
       data-action="user-popup#show"
       data-user-popup-username-value="{{ user.username }}"
       href="{{ path('user', {'username': user.username}) }}">
        {%- if avatar and user.avatar and (app.user and not app.user.hideUserAvatars) -%}
            <img width="30" height="30" class="rounded-circle me-1"
                 src="{{ asset(user.avatar.filePath) | imagine_filter('avatar_thumb') }}"
                 alt="{{ user.username }}"/>
        {%- endif -%}
        {{ user.username }}
    </a>
{% endblock user %}

{% block avatar %}
    {% set linkToApProfile = is_user_page() and user.apProfileId %}
    <a rel="{{ linkToApProfile ? 'nofollow noopener noreferrer' : '' }}"
       href="{{ linkToApProfile ? user.apProfileId : path('user', {'username': user.username}) }}">
        <div class="kbin-avatar">
            {% if user.avatar %}
                <img width="100" height="100" class="img-thumbnail" src="{{ asset(user.avatar.filePath) | imagine_filter('avatar_thumb') }}"
                     alt="{{ user.username }}" style="{{ width ? 'max-width:'~width : '' }}"/>
            {% else %}
                <img width="100" height="100" class="img-thumbnail" src="{{ asset('build/images/avatar.jpg') }}" alt="{{ user.username }}"/>
            {% endif %}
        </div>
    </a>
{% endblock %}
