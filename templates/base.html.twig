<!DOCTYPE html>
<html lang="pl"
      style="font-size: {{ app.request.cookies.has(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_FONT_SIZE'))
      ? app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_FONT_SIZE'))~'%'
      : '100%' }}">
<head>
    <title>{%- block title -%}{{ kbin_meta_title() }}{%- endblock -%}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="{{ kbin_meta_keywords() }}">
    <meta name="description" content="{% block description %}{{ kbin_meta_description() }}{% endblock %}">

    <meta property="og:url" content="{{ app.request.uri }}">
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{ block('title')|trim }}">
    <meta property="og:description" content="{{ block('description')|trim }}">
    <meta property="og:image" content="{% block image %}{{ absolute_url(asset('og.png')) }}{% endblock %}">

    <link rel="shortcut icon" href="{{ asset('favicon.ico') }}">

    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
        <script type="application/json" id="mercure-url">{{ mercure()|raw }}</script>
        <script>
            window.KBIN_USER = "{{ app.user ? app.user.username : null }}";
            window.KBIN_MAGAZINE = "{{ magazine is defined and magazine ? magazine.name : null }}"
            window.KBIN_ENTRY_ID = "{{ entry is defined and entry ? entry.id : null }}"
            window.KBIN_POST_ID = "{{ post is defined and post ? post.id : null }}"
        </script>
    {% endblock %}

    <style>
        {% if magazine is defined and magazine %}
        {{ magazine.customCss }}
        {% endif %}
    </style>
</head>
<body class="{{ html_classes(app.request.cookies.has(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_THEME'))
    ? 'theme--'~app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_THEME'))
    : 'theme--dark', {
        'rounded-edges': app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_GENERAL_ROUNDED_EDGES')) is same as 'true',
        'topbar': app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_GENERAL_TOPBAR')) is same as 'true',
        'fixed-navbar': app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_GENERAL_FIXED_NAVBAR')) is same as 'true',
        'sidebar-left': app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_GENERAL_SIDEBAR_POSITION')) is same as constant('App\\Controller\\User\\ThemeSettingsController::LEFT'),
    }) }}" data-controller="kbin notifications">
{% include 'layout/_header.html.twig' with {header_nav: block('header_nav')} %}
<div id="middle" class="{%- block mainClass -%}page{%- endblock %}">
    <div class="kbin-container">
        <main id="main"
              data-controller="lightbox"
              class="{{ html_classes({'view-compact': app.request.cookies.get(constant('App\\Controller\\User\\ThemeSettingsController::KBIN_ENTRIES_VIEW')) is same as constant('App\\Controller\\User\\ThemeSettingsController::COMPACT')}) }}">
            {% block body %}{% endblock %}
        </main>
        <aside id="sidebar">
            {% block sidebar %}
                {% include 'layout/_sidebar.html.twig' with {sidebar_top: block('sidebar_top')} %}
            {% endblock %}
        </aside>
    </div>
</div>
{% include 'layout/_footer.html.twig' %}
{% include 'layout/_topbar.html.twig' %}
<div id="popover" class="popover js-popover section section--small" role="dialog">
</div>
</body>
</html>
